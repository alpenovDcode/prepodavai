# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ .env —Ñ–∞–π–ª–æ–≤

–ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–æ–¥–∏–Ω .env —Ñ–∞–π–ª –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞**, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç—Å—è docker-compose.yml.

```
PREPODAVAI/
‚îú‚îÄ‚îÄ .env                    # ‚Üê –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ –≤ git!)
‚îú‚îÄ‚îÄ docker-compose.yml      # –ß–∏—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îî‚îÄ‚îÄ env.example         # –ü—Ä–∏–º–µ—Ä –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îî‚îÄ‚îÄ ...
```

## üîß –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd /path/to/PREPODAVAI
cp docs/PRODUCTION_ENV_EXAMPLE .env
# –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é
nano .env
```

### –®–∞–≥ 2: –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–°–º. –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ.

## üìù –ü—Ä–∏–º–µ—Ä .env –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

```bash
# ============================================
# Database
# ============================================
POSTGRES_USER=prepodavai
POSTGRES_PASSWORD=–í–ê–®_–°–ò–õ–¨–ù–´–ô_–ü–ê–†–û–õ–¨_–î–õ–Ø_POSTGRES
POSTGRES_DB=prepodavai

# ============================================
# Redis
# ============================================
REDIS_PASSWORD=–í–ê–®_–°–ò–õ–¨–ù–´–ô_–ü–ê–†–û–õ–¨_–î–õ–Ø_REDIS

# ============================================
# Backend API
# ============================================
NODE_ENV=production
PORT=3001
JWT_SECRET=–í–ê–®_–°–ò–õ–¨–ù–´–ô_JWT_–°–ï–ö–†–ï–¢_–ú–ò–ù–ò–ú–£–ú_32_–°–ò–ú–í–û–õ–ê

# CORS - —É–∫–∞–∂–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com

# –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
ADMIN_USER_IDS=user-id-1,user-id-2

# ============================================
# Telegram Bot
# ============================================
TELEGRAM_BOT_TOKEN=–í–ê–®_TELEGRAM_BOT_TOKEN
NEXT_PUBLIC_TELEGRAM_BOT_NAME=your_bot_name

# ============================================
# Public URLs
# ============================================
PUBLIC_API_URL=https://api.yourdomain.com
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –Ω–∞ —Ñ–∞–π–ª—ã
GIGACHAT_FILE_SHARE_SECRET=—Å–ª—É—á–∞–π–Ω—ã–π_64—Å–∏–º–≤–æ–ª—å–Ω—ã–π_—Å–µ–∫—Ä–µ—Ç

# ============================================
# External Services
# ============================================
N8N_WEBHOOK_URL=https://your-n8n-instance.com/webhook/
OPENAI_API_KEY=your_openai_key_if_needed
GAMMA_API_KEY=your_gamma_key_if_needed

# ============================================
# Frontend
# ============================================
NEXT_PUBLIC_API_URL=https://api.yourdomain.com
# –ò–ª–∏ –µ—Å–ª–∏ API –Ω–∞ —Ç–æ–º –∂–µ –¥–æ–º–µ–Ω–µ:
# NEXT_PUBLIC_API_URL=https://yourdomain.com/api

# ============================================
# GigaChat API (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)
# ============================================
GIGACHAT_CLIENT_ID=–≤–∞—à_gigachat_client_id
GIGACHAT_CLIENT_SECRET=–≤–∞—à_gigachat_client_secret
GIGACHAT_SCOPE=GIGACHAT_API_PERS

# URL –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–æ–±—ã—á–Ω–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
GIGACHAT_AUTH_URL=https://ngw.devices.sberbank.ru:9443

# URL API (–æ–±—ã—á–Ω–æ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è)
GIGACHAT_API_URL=https://gigachat.devices.sberbank.ru/api/v1

# GIGACHAT_IMAGE_ENDPOINT –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ /chat/completions —Å —Ñ—É–Ω–∫—Ü–∏–µ–π text2image

# –í–ê–ñ–ù–û: –ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –í–°–ï–ì–î–ê –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å false!
GIGACHAT_DISABLE_TLS_VERIFICATION=false

# –ú–æ–¥–µ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å)
GIGACHAT_DEFAULT_CHAT_MODEL=GigaChat
GIGACHAT_DEFAULT_IMAGE_MODEL=GigaChat-Image
GIGACHAT_DEFAULT_EMBEDDINGS_MODEL=GigaChat-Embedding
GIGACHAT_DEFAULT_AUDIO_MODEL=GigaChat-Audio
```

## üîê –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–ª—å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π –∏ —Å–µ–∫—Ä–µ—Ç–æ–≤

### JWT_SECRET (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
```bash
openssl rand -hex 32
```

### POSTGRES_PASSWORD
```bash
openssl rand -base64 24
```

### REDIS_PASSWORD
```bash
openssl rand -base64 16
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ .env —Ñ–∞–π–ª–∞

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
grep -E "^[A-Z_]+=" .env | grep -v "^#" | wc -l
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

```bash
# –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫
set -a
source .env
set +a
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª –Ω–µ –≤ git

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ .gitignore (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ)
echo ".env" >> .gitignore

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ .env –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è
git check-ignore .env
# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: .env
```

## üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è .env —Ñ–∞–π–ª–∞:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down
docker compose up -d

# –ò–ª–∏ —Ç–æ–ª—å–∫–æ backend
docker compose restart backend
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ GigaChat
docker exec prepodavai-backend-prod env | grep GIGACHAT

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
docker exec prepodavai-backend-prod env | sort
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ .env –≤ git!** –§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ä–µ—Ç—ã
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏** –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
3. **GIGACHAT_DISABLE_TLS_VERIFICATION=false** –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. **JWT_SECRET** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞
5. **CORS_ORIGIN** –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω
6. **–•—Ä–∞–Ω–∏—Ç–µ .env –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –º–µ–Ω–µ–¥–∂–µ—Ä–µ —Å–µ–∫—Ä–µ—Ç–æ–≤)

## üìã –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

- [ ] .env —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- [ ] JWT_SECRET —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞
- [ ] POSTGRES_PASSWORD —Å–∏–ª—å–Ω—ã–π –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π
- [ ] REDIS_PASSWORD —Å–∏–ª—å–Ω—ã–π –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π
- [ ] GIGACHAT_CLIENT_ID –∏ GIGACHAT_CLIENT_SECRET –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- [ ] GIGACHAT_DISABLE_TLS_VERIFICATION=false
- [ ] CORS_ORIGIN —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–∞—à –¥–æ–º–µ–Ω
- [ ] NEXT_PUBLIC_API_URL —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API URL
- [ ] .env –¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore
- [ ] .env –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è git (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ `git status`)

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
ls -la .env

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
cat .env | grep -v "^#" | grep -v "^$"

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker compose down
docker compose up -d
```

### –ü—Ä–æ–±–ª–µ–º–∞: "GIGACHAT_CLIENT_ID is required"

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker exec prepodavai-backend-prod env | grep GIGACHAT

# –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ docker-compose.yml
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ environment —Å–µ–∫—Ü–∏—é backend
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ–∫—Ä–µ—Ç—ã –≤–∏–¥–Ω—ã –≤ –ª–æ–≥–∞—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker logs prepodavai-backend-prod | grep -i secret

# –ï—Å–ª–∏ —Å–µ–∫—Ä–µ—Ç—ã –≤–∏–¥–Ω—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥ - –Ω–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã!
```

